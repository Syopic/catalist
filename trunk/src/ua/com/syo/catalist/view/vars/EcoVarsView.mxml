<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml"
		creationComplete="init();" 
		width="100%" height="100%"
		paddingLeft="10" paddingTop="10" paddingRight="10" paddingBottom="10">
	<mx:Script>
		<![CDATA[
			import ua.com.syo.catalist.data.Globals;
			import ua.com.syo.catalist.model.polynoms.PolyModelsXX;
			import ua.com.syo.catalist.model.polynoms.PolyKoef;
			import ua.com.syo.catalist.model.calc.EconomyVars;
			import ua.com.syo.catalist.model.calc.EcologyVars;
			import ua.com.syo.catalist.model.calc.EnergyVars;
			import ua.com.syo.catalist.data.CycleData;
			import mx.collections.ArrayCollection;
			[Bindable]
			private var ecoDP:ArrayCollection;
			
			[Bindable]
			private var isN:Boolean = true; 
			[Bindable]
			private var timeW:int = 5; 
			
			public function init():void {
				ecoDP = new ArrayCollection();
				isN = (PolyKoef.currentMode == "withoutNeutralizer");
				for (var i:Number = Globals.startT; i < Globals.endT; i+=Globals.dT) {
					var o:Object;
					if (isN) {
						o = {time : i, 
								CO : EcologyVars.getCO(i), 
								CO2 : EcologyVars.getCO2(i), 
								NOx : EcologyVars.getNOx(i), 
								HCs : EcologyVars.getHCs(i), 
								O2 : EcologyVars.getO2(i)}
					} else {
						o = {time : i, 
								CO : EcologyVars.getCO(i), 
								CO2 : EcologyVars.getCO2(i), 
								NOx : EcologyVars.getNOx(i), 
								HCs : EcologyVars.getHCs(i), 
								O2 : EcologyVars.getO2(i),
								
								NCO : EcologyVars.getCO(i), 
								NCO2 : EcologyVars.getCO2(i), 
								NNOx : EcologyVars.getNOx(i), 
								NHCs : EcologyVars.getHCs(i), 
								NO2 : EcologyVars.getO2(i)}
					}
					
					ecoDP.addItem(o);
					timeW = 8;
				}
				//showGraph(distSer);
			}
			
			private function showGraph(ls:LineSeries):void {
				linechart.series = [];
				linechart.series.push(ls);
				linechart.updateAllDataTips();
			}
		]]>
	</mx:Script>	
	<mx:Stroke id = "s1" color="#0099ff" weight="2"/>
    <mx:Stroke id = "s2" color="red" weight="2"/>
    <mx:Stroke id = "s3" color="green" weight="2"/>
    
	<mx:VDividedBox width="100%" height="100%">
	<mx:HBox width="100%" height="100%">
	
	    <mx:LineSeries id="COSer" yField="CO2" displayName="CO" lineStroke="{s1}" />
	    <mx:LineSeries id="CO2Ser" yField="CO2" displayName="CO2" lineStroke="{s1}"/>
	    <mx:LineSeries id="NOxSer" yField="NOx" displayName="NOx" lineStroke="{s1}"/>
	    <mx:LineSeries id="HCsSer" yField="HCs" displayName="HCs" lineStroke="{s1}"/>
	    <mx:LineSeries id="O2Ser" yField="O2" displayName="O2" lineStroke="{s1}"/>
	    
	    <mx:LineSeries id="NCOSer" yField="NCO" displayName="NCO" lineStroke="{s1}"/>
	    <mx:LineSeries id="NCO2Ser" yField="NCO2" displayName="NCO2" lineStroke="{s2}"/>
	    <mx:LineSeries id="NNOxSer" yField="NNOx" displayName="NNOx" lineStroke="{s2}"/>
	    <mx:LineSeries id="NHCsSer" yField="NHCs" displayName="NHCs" lineStroke="{s2}"/>
	    <mx:LineSeries id="NO2Ser" yField="NO2" displayName="NO2" lineStroke="{s2}"/>
	    
		<mx:LineChart id="linechart" height="100%" width="100%"
            showDataTips="true" dataProvider="{ecoDP}">
		    
        </mx:LineChart>
        <mx:HBox>
		    <mx:VBox height="100%" >
		    	<mx:LinkButton label="CO" click="showGraph(COSer)" />
		    	<mx:LinkButton label="CO2" click="showGraph(CO2Ser)"/>
		    	<mx:LinkButton label="NOx" click="showGraph(NOxSer)"/>
		    	<mx:LinkButton label="HCs" click="showGraph(HCsSer)" />
		    	<mx:LinkButton label="O2" click="showGraph(O2Ser)" />
		    </mx:VBox>   	 
		    <mx:VBox height="100%" includeInLayout="{!isN}" visible="{!isN}">
		    	<mx:LinkButton label="NCO" click="showGraph(NCOSer)" />
		    	<mx:LinkButton label="NCO2" click="showGraph(NCO2Ser)"/>
		    	<mx:LinkButton label="NNOx" click="showGraph(NNOxSer)"/>
		    	<mx:LinkButton label="NHCs" click="showGraph(NHCsSer)"/>
		    	<mx:LinkButton label="NO2" click="showGraph(NO2Ser)"/>
		    </mx:VBox>   	 
        </mx:HBox>
	</mx:HBox>
	
		<mx:DataGrid width="100%" height="300" dataProvider="{ecoDP}">
			<mx:columns>
				<mx:DataGridColumn  headerText="Час (сек.)" dataField="time" visible="true"/>
				<mx:DataGridColumn  headerText="CO" dataField="CO" />
				<mx:DataGridColumn  headerText="CO2" dataField="CO2" />
				<mx:DataGridColumn  headerText="NOx" dataField="NOx"/>
				<mx:DataGridColumn  headerText="HCs" dataField="HCs"/>
				<mx:DataGridColumn  headerText="O2" dataField="O2" />
				<mx:DataGridColumn  headerText="NCO" dataField="NCO" visible="{!isN}"/>
				<mx:DataGridColumn  headerText="NCO2" dataField="NCO2" visible="{!isN}"/>
				<mx:DataGridColumn  headerText="NNOx" dataField="NNOx" visible="{!isN}"/>
				<mx:DataGridColumn  headerText="NHCs" dataField="NHCs" visible="{!isN}"/>
				<mx:DataGridColumn  headerText="NO2" dataField="NO2" visible="{!isN}"/>
			</mx:columns>
		</mx:DataGrid>
	</mx:VDividedBox>
</mx:VBox>
